(function(t){function e(e){for(var n,r,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)r=s[d],i[r]&&p.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},o=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"04b2":function(t,e,a){"use strict";var n=a("5b09"),i=a.n(n);i.a},"097e":function(t,e){(function(t){var e,a=t.document,n=a.documentElement;function i(){var t=n.getBoundingClientRect().width,e=t/6.4;n.style.fontSize=e+"px"}t.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(i,10)},!1),t.addEventListener("pageshow",function(t){t.persisted&&(clearTimeout(e),e=setTimeout(i,10))},!1),i()})(window)},"141e":function(t,e,a){"use strict";var n=a("9ffb"),i=a.n(n);i.a},"21bb":function(t,e,a){"use strict";var n=a("bcc9"),i=a.n(n);i.a},"4ee2":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("be39");var n=a("efa0"),i=(a("9cb7"),a("66fd")),o=(a("93ac"),a("bb33")),r=(a("19de"),a("234f")),s=(a("f908"),a("b528")),c=(a("ab71"),a("58e6")),l=(a("2994"),a("2bdd")),u=(a("4d48"),a("d1e1")),d=(a("81e6"),a("9ffbc")),p=(a("e7e5"),a("d399")),m=(a("be7f"),a("565f")),f=(a("0653"),a("34e9")),g=(a("66b9"),a("b650")),v=(a("c3a6"),a("ad06")),h=(a("5246"),a("6b41")),b=(a("537a"),a("ac28")),y=(a("a52c"),a("2ed4")),_=(a("7844"),a("5596")),w=(a("4b0a"),a("2bb1")),j=(a("66cf"),a("343b")),O=(a("da3c"),a("0b33")),L=(a("bda7"),a("5e46")),x=a("2b0e"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("keep-alive",[t.$route.meta.KeepAlive?a("router-view"):t._e()],1),t.$route.meta.KeepAlive?t._e():a("router-view"),a("router-view",{attrs:{name:"footer-bar"}})],1)},I=[],E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-tabbar",{on:{change:t.change},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"wap-home",to:"/"}},[t._v("首页")]),a("van-tabbar-item",{attrs:{icon:"records",to:"/category"}},[t._v("分类")]),a("van-tabbar-item",{attrs:{icon:"cart",to:"/cart"}},[t._v("购物车")]),a("van-tabbar-item",{attrs:{icon:"contact",to:"/profile"}},[t._v("我的")])],1)},U=[],k=a("e814"),$=a.n(k),P={data:function(){return{active:0}},created:function(){this.active=$()(localStorage.getItem("active"))},methods:{change:function(t){localStorage.setItem("active",t)}}},T=P,V=a("2877"),S=Object(V["a"])(T,E,U,!1,null,"8d152c9c",null),G=S.exports,A={},H=A,J=Object(V["a"])(H,C,I,!1,null,null,null),K=J.exports,M=a("8c4f"),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("van-nav-bar",{staticClass:"nav-title",attrs:{title:"首页"}},[a("van-icon",{attrs:{slot:"left",name:"search"},slot:"left"}),a("van-icon",{attrs:{slot:"right"},on:{click:function(e){return t.$router.push("/profile")}},slot:"right"},[t._v(t._s("{}"===JSON.stringify(t.userInfo)?"未登录":t.userInfo.username))])],1),a("div",{staticClass:"carousel"},[a("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.carouselItem,function(t,e){return a("van-swipe-item",{key:e},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgsrc,expression:"item.imgsrc"}],attrs:{alt:""}})])}),1)],1),a("div",{staticClass:"hot"},[a("p",{staticClass:"hot-title"},[t._v("热销产品")]),a("swiper",{staticClass:"hot-swiper",attrs:{options:t.swiperOption}},t._l(t.hotproducts,function(e,n){return a("swiper-slide",{key:n},[a("div",{staticClass:"hot-swiper-content"},[a("img",{attrs:{src:e.img,alt:""}}),a("div",[t._v(t._s(e.name))]),a("div",[t._v("￥"+t._s(e.price))])])])}),1)],1),a("div",{staticClass:"variety"},[a("p",[t._v("推荐商品")]),a("ul",t._l(t.varietyItem,function(e,n){return a("li",{key:n,staticClass:"variety-item"},[a("img",{attrs:{src:e.img,alt:""}}),a("p",[t._v(t._s(e.name))]),a("p",[t._v("￥"+t._s(e.price))])])}),0)])],1)},X=[],q=a("cebc"),z=(a("dfa4"),a("7212")),B=a("bc3a"),N=a.n(B),D="http://www.alin.com/",W="http://localhost:3000",Y={getVarietyItem:D+"getVarietyItem",getHotProduct:D+"getHotProduct",registUser:W+"/user/registUser",loginUser:W+"/user/loginUser",getTypes:W+"/type/getTypes",getProductByType:W+"/product/getProductByType",getDetail:W+"/product/getDetail",addCart:W+"/cart/addCart",getCart:W+"/cart/getCart",delCart:W+"/cart/delCart"},F=Y,Z=a("2f62"),Q={data:function(){return{carouselItem:[{name:"img1",imgsrc:"http://img0.selfimg.com.cn/Lvogue807/2019/02/20/1550634959_AguPg3.jpg"},{name:"img2",imgsrc:"http://img3.selfimg.com.cn/Lvogue807/2019/03/11/1552292693_hZcrqy.jpg"},{name:"img3",imgsrc:"http://img1.selfimg.com.cn/Lvogue807/2018/10/30/1540885477_aBQOvx.jpg"}],hotproducts:[{name:"去海边",img:"http://img1.selfimg.com.cn/Lvogue903/2018/08/16/1534411812_0W8EXR.jpg",price:"120",company:"VOGUE杂志",city:"USA"},{name:"粉色火烈鸟",img:"http://img3.selfimg.com.cn/Lvogue903/2018/08/03/1533286520_OIWDpJ.jpg",price:"150",company:"VOGUE杂志",city:"England"},{name:"色彩飘扬",img:"http://img2.selfimg.com.cn/Lvogue903/2018/07/31/1533033188_pIJKS5.jpg",price:"130",company:"VOGUE杂志",city:"French"},{name:"未知之地",img:"http://img2.selfimg.com.cn/Lvogue903/2018/06/08/1528444261_9xTvG1.jpg",price:"30",company:"VOGUE杂志",city:"England"},{name:"绚烂秋意",img:"http://img0.selfimg.com.cn/vogue210X210/2019/03/11/1552300610_JsGiXC.jpg",price:"50",company:"VOGUE杂志",city:"us"},{name:"金风玉露",img:"http://img2.selfimg.com.cn/Lvogue912/2018/08/16/1534411903_d8Yf35.jpg",price:"60",company:"VOGUE杂志",city:"Korea"},{name:"pink",img:"http://img2.selfimg.com.cn/Lvogue912/2018/08/03/1533286544_Hswj0O.jpg",price:"80",company:"VOGUE杂志",city:"NY"},{name:"服饰美容",img:"http://img2.selfimg.com.cn/Lvogue912/2018/07/31/1533033288_xdpAui.jpg",price:"40",company:"VOGUE杂志",city:"LA"},{name:"AW秋冬时尚周",img:"http://conde.adsame.com/dolphinfile/vogue/2019/02/0_36.jpg",price:"55",company:"VOGUE杂志",city:"us"},{name:"刘亦菲美好时光",img:"http://img3.selfimg.com.cn/Lvogue914/2016/06/15/1465972831_RbVxfV.jpg",price:"90",company:"VOGUE杂志",city:"shanghai"},{name:"杨幂摩登力量",img:"http://img1.selfimg.com.cn/Lvogue914/2015/11/27/1448612991_E3XHJY.jpg",price:"99",company:"VOGUE杂志",city:"beijing"},{name:"女神制造",img:"http://img0.selfimg.com.cn/Lvogue913/2016/12/08/1481193105_ZpFfW4.jpg",price:"40",company:"VOGUE杂志",city:"french"}],swiperOption:{slidesPerView:3},varietyItem:[]}},components:{swiper:z["swiper"],swiperSlide:z["swiperSlide"]},created:function(){var t=this,e=F.getVarietyItem;N.a.get(e).then(function(e){console.log(e),t.varietyItem=e.data})},computed:Object(q["a"])({},Object(Z["c"])(["userInfo"]))},tt=Q,et=(a("21bb"),Object(V["a"])(tt,R,X,!1,null,null,null)),at=et.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"商品分类"}}),a("div",{staticClass:"category"},[a("van-row",[a("van-col",{staticClass:"nav",attrs:{span:"8"}},[a("ul",t._l(t.types,function(e,n){return a("li",{key:n,class:{active:t.active==n},on:{click:function(a){return t.selectcategory(e.typeId,n)}}},[t._v("\n                 "+t._s(e.typeName)+"\n               ")])}),0)]),a("van-col",{staticClass:"container",attrs:{span:"16"}},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("van-list",{staticClass:"content",attrs:{finished:t.finished},on:{load:t.onload},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},t._l(t.productList,function(e,n){return a("div",{key:n,staticClass:"content-item",on:{click:function(a){return t.godetail(e._id)}}},[a("img",{attrs:{src:e.img,alt:""}}),a("p",{staticClass:"content-item-name"},[t._v(t._s(e.name))]),a("p",[t._v(t._s(e.price))])])}),0)],1)],1)],1)],1)],1)},it=[],ot={data:function(){return{types:[],active:0,productList:[],typeId:1,start:0,limit:10,finished:!1,isLoading:!1}},created:function(){var t=this;N()({url:F.getTypes}).then(function(e){t.types=e.data,t.selectcategory(t.typeId,t.active)}).catch(function(t){console.log(t)})},methods:{selectcategory:function(t,e){this.active=e,this.typeId=t,this.productList=[],this.finished=!1,this.getproductList()},getproductList:function(){var t=this;this.isLoading=!0,N()({url:F.getProductByType,method:"get",params:{typeId:this.typeId,start:this.productList.length,limit:this.limit}}).then(function(e){0!=e.data.length?t.productList=t.productList.concat(e.data):t.finished=!0,t.isLoading=!1}).catch(function(t){console.log(t)})},onload:function(){var t=this;setTimeout(function(){t.getproductList()},2e3)},onRefresh:function(){var t=this;setTimeout(function(){t.productList=[],t.getproductList()},2e3)},godetail:function(t){this.$router.push("/detail/".concat(t))}}},rt=ot,st=(a("141e"),Object(V["a"])(rt,nt,it,!1,null,null,null)),ct=st.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"购物车"}}),a("div",{staticClass:"card"},t._l(t.productList,function(e,n){return a("van-card",{key:n,staticClass:"card-content",attrs:{price:e.price,desc:e.compony,title:e.name,thumb:e.img}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("van-button",{attrs:{size:"mini"},on:{click:function(a){return t.delCart(e._id,n)}}},[t._v("删除")])],1)])}),1),a("van-submit-bar",{staticClass:"submit-bar",attrs:{price:t.totalPrice,"button-text":"提交订单"},on:{submit:t.onSubmit}})],1)},ut=[],dt=a("5d73"),pt=a.n(dt),mt=a("f499"),ft=a.n(mt),gt={data:function(){return{productList:[]}},computed:Object(q["a"])({},Object(Z["c"])(["userInfo"]),{totalPrice:function(){return 10*this.productList.reduce(function(t,e){return t+=e.price,t},0)*10}}),created:function(){var t=this;"{}"===ft()(this.userInfo)?(this.$toast.fail("请先登录"),setTimeout(function(){t.$router.push("/profile")},1e3)):N()({url:F.getCart,method:"get",params:{userId:this.userInfo._id}}).then(function(e){console.log(e);var a=!0,n=!1,i=void 0;try{for(var o,r=pt()(e.data);!(a=(o=r.next()).done);a=!0){var s=o.value;t.productList.push(s.productId)}}catch(c){n=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(n)throw i}}}).catch(function(t){console.log(t)})},methods:{onSubmit:function(){this.$toast.success("支付")},delCart:function(t,e){var a=this;N()({url:F.delCart,method:"get",params:{productId:t}}).then(function(t){console.log(t),a.productList.splice(e,1)}).catch(function(t){console.log(t)})}}},vt=gt,ht=(a("6fe5"),Object(V["a"])(vt,lt,ut,!1,null,null,null)),bt=ht.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-tabs",[a("van-tab",{attrs:{title:"登录"}},[a("van-cell-group",[a("van-field",{attrs:{label:"用户名",require:"",clearable:"",placeholder:"请输入用户名"},model:{value:t.loginUsername,callback:function(e){t.loginUsername=e},expression:"loginUsername"}}),a("van-field",{attrs:{label:"密码",require:"",clearable:"",placeholder:"请输入密码"},model:{value:t.loginPassword,callback:function(e){t.loginPassword=e},expression:"loginPassword"}})],1),a("div",[a("van-button",{attrs:{type:"primary",size:"large","loading:true":""},on:{click:t.loginHandle}},[t._v("登录")])],1)],1),a("van-tab",{attrs:{title:"注册"}},[a("van-cell-group",[a("van-field",{attrs:{label:"用户名",require:"",clearable:"",placeholder:"请输入用户名"},model:{value:t.registUsername,callback:function(e){t.registUsername=e},expression:"registUsername"}}),a("van-field",{attrs:{label:"密码",type:"password",require:"",clearable:"",placeholder:"请输入密码"},model:{value:t.registPassword,callback:function(e){t.registPassword=e},expression:"registPassword"}})],1),a("div",[a("van-button",{attrs:{type:"primary",size:"large"},on:{click:t.registHandle}},[t._v("注册")])],1)],1)],1)],1)},_t=[],wt=a("795b"),jt=a.n(wt),Ot={data:function(){return{loginUsername:"",loginPassword:"",registUsername:"",registPassword:""}},methods:Object(q["a"])({},Object(Z["b"])(["loginAction"]),{registHandle:function(){var t=this;N()({url:F.registUser,method:"post",data:{username:this.registUsername,password:this.registPassword}}).then(function(e){200==e.data.code?(t.$toast.success("注册成功"),t.registUsername=t.registPassword=""):t.$toast.fail("注册失败")}).catch(function(e){console.log(e),t.$toast.fail("注册失败")})},loginHandle:function(){var t=this;N()({url:F.loginUser,method:"post",data:{username:this.loginUsername,password:this.loginPassword}}).then(function(e){200==e.data.code&&new jt.a(function(t,e){setTimeout(function(){t()},1e3)}).then(function(){t.$toast.success("登陆成功"),t.loginAction(e.data.userInfo),t.$router.go(-1)}).catch(function(e){t.$toast.fail("保存状态失败"),console.log(e)})}).catch(function(e){console.log(e),t.$toast.fail("登录失败")})}})},Lt=Ot,xt=Object(V["a"])(Lt,yt,_t,!1,null,null,null),Ct=xt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-button",{attrs:{type:"primary"},on:{click:t.getdata}},[t._v("获取数据")]),a("van-button",{attrs:{type:"danger"},on:{click:t.cleardata}},[t._v("清空数据")]),a("ul",t._l(t.list,function(e,n){return a("li",{key:n},[t._v("\n            "+t._s(n+1)+":"+t._s(e.title)+"               \n        ")])}),0)],1)},Et=[],Ut={data:function(){return{list:[]}},methods:{ajax:function(){var t,e=this,a="https://bird.ioliu.cn/v2?url=http://api.douban.com/v2/movie/top250?start=25&count=25";t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.open("GET",a,!0),t.send(),t.addEventListener("readystatechange",function(){if(4==t.readyState&&200==t.status){var a=JSON.parse(t.responseText);e.list=a.subjects}})},getdata:function(){this.ajax()},cleardata:function(){this.list=[]}}},kt=Ut,$t=Object(V["a"])(kt,It,Et,!1,null,"431f3906",null),Pt=$t.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"商品详情","left-text":"返回"},on:{"click-left":function(e){return t.$router.go(-1)}}}),a("img",{staticClass:"detail-img",attrs:{src:t.detail.img,alt:""}}),a("div",{staticClass:"detail"},[a("p",{staticClass:"detail-name"},[t._v(t._s(t.detail.name))]),a("p",{staticClass:"detail-price"},[t._v("￥"+t._s(t.detail.price))]),a("p",{staticClass:"detail-compony"},[t._v("公司："+t._s(t.detail.compony))]),a("p",{staticClass:"detail-city"},[t._v(t._s(t.detail.city))])]),a("div",{staticClass:"toolbar"},[a("van-goods-action",[a("van-goods-action-mini-btn",{attrs:{icon:"chat-o",text:"客服"}}),a("van-goods-action-mini-btn",{attrs:{icon:"cart-o",text:"购物车"}}),a("van-goods-action-big-btn",{attrs:{text:"加入购物车"},on:{click:t.addcart}}),a("van-goods-action-big-btn",{attrs:{primary:"",text:"立即购买"}})],1)],1)],1)},Vt=[],St={data:function(){return{detail:[]}},created:function(){var t=this;N()({url:F.getDetail,method:"get",params:{id:this.$route.params.id}}).then(function(e){t.detail=e.data}).catch(function(t){console.log(t)})},methods:{addcart:function(){var t=this;"{}"===ft()(this.userInfo)?(this.$toast.fail("请先登录"),setTimeout(function(){t.$router.push("/profile")},1e3)):N()({url:F.addCart,method:"post",data:{productId:this.detail._id,userId:this.userInfo._id}}).then(function(e){200==e.data.code&&t.$toast.success(e.data.message)}).catch(function(t){console.log(t)})}},computed:Object(q["a"])({},Object(Z["c"])(["userInfo"]))},Gt=St,At=(a("04b2"),Object(V["a"])(Gt,Tt,Vt,!1,null,"0b69ee30",null)),Ht=At.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",[t._v("页面错误404")])},Kt=[],Mt={},Rt=Object(V["a"])(Mt,Jt,Kt,!1,null,null,null),Xt=Rt.exports;x["a"].use(M["a"]);var qt=new M["a"]({routes:[{path:"/",name:"home",components:{default:at,"footer-bar":G},meta:{KeepAlive:!0}},{path:"/category",name:"category",components:{default:ct,"footer-bar":G},meta:{KeepAlive:!0}},{path:"/cart",name:"cart",components:{default:bt,"footer-bar":G},meta:{KeepAlive:!0}},{path:"/profile",name:"profile",components:{default:Ct,"footer-bar":G},meta:{KeepAlive:!1}},{path:"/ajax",name:"ajax",component:Pt},{path:"/detail/:id",name:"detail",component:Ht},{path:"*",component:Xt}]});x["a"].use(Z["a"]);var zt=new Z["a"].Store({state:{userInfo:{}},getters:{},mutations:{changelogin:function(t,e){t.userInfo=e}},actions:{loginAction:function(t,e){var a=t.commit;a("changelogin",e)}}}),Bt=(a("4ee2"),a("097e"),a("96eb")),Nt=a.n(Bt),Dt=Nt.a.Random,Wt=function(t){for(var e=[],a=0;a<100;a++){var n={name:Dt.ctitle(5,20),img:Dt.dataImage("125x125","VOGUE"+Dt.integer(1,100)),price:Dt.integer(20,1e3),owner:Dt.cname()};e.push(n)}return e};Nt.a.mock("http://www.alin.com/getVarietyItem",Wt),x["a"].config.productionTip=!1,x["a"].use(n["a"]).use(i["a"]).use(o["a"]).use(r["a"]).use(s["a"]).use(c["a"]).use(l["a"]).use(u["a"]).use(d["a"]).use(p["a"]).use(m["a"]).use(f["a"]).use(g["a"]).use(v["a"]).use(h["a"]).use(b["a"]).use(y["a"]).use(_["a"]).use(w["a"]).use(j["a"]).use(O["a"]).use(L["a"]),new x["a"]({router:qt,store:zt,render:function(t){return t(K)}}).$mount("#app")},"5b09":function(t,e,a){},"6ac7":function(t,e,a){},"6fe5":function(t,e,a){"use strict";var n=a("6ac7"),i=a.n(n);i.a},"9ffb":function(t,e,a){},bcc9:function(t,e,a){}});
//# sourceMappingURL=app.9e199cf3.js.map